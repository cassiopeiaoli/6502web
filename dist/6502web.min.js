const SHARED_MEMORY_START=50,SHARED_MEMORY_END=60,htmlElements=["p","b","i","span","button","div","h1","h2","h3","h4","h5","h6"],jsEvents=["click","mousedown","mouseup","dblclick","mousemove","mouseover","mouseout","mouseenter","mouseleave"];class Program{#a;#b;#c;#d=0;#e=0;#f=0;#g=0;#h=!1;#i=!1;#j=!1;#k=document.body;#l=[];#m={log:!1,sharedMemory:[]};constructor(t){this.#b=t,this.#a=[]}numberToHTMLElement(t){return htmlElements[t]}numberToHTMLEvent(t){return jsEvents[t]}runBuiltinFunction(t){switch(t){case 0:let e=document.createElement(this.numberToHTMLElement(this.#a[70]));this.#k.appendChild(e),this.#k=e;break;case 1:if("string"==typeof this.#e){this.#k.textContent=this.#e;return}let s=this.#a[70];if(!this.#k)throw Error("You are trying to set text on a null element. Create an element and set text right after its creation");let a=this.#a.slice(71,71+s).map(t=>String.fromCharCode(t)).join("");this.#k.textContent=a;break;case 2:let i=this.numberToHTMLEvent(this.#a[70]),r=this.#a[71];if(!this.#k)throw Error("You are trying to set up an event listener on a null element.");this.#k.addEventListener(i,this.#l[r]);break;case 3:this.#k!==document.body&&(this.#k=this.#k.parentElement);break;case 4:if("string"==typeof this.#e){this.#k.className=this.#e;return}let n=this.#a[70];if(!this.#k)throw Error("You are trying to set className on a null element. Create an element and set text right after its creation");let o=this.#a.slice(71,71+n).map(t=>String.fromCharCode(t)).join("");this.#k.className=o}}run(t={}){for(this.#m=t,this.#l=this.#m.sharedMemory;this.#d<this.#b.length;){switch(this.#b[this.#d]){case 169:let e=this.#b[++this.#d];this.#m.log&&console.info("LDA "+e),this.#e=e;break;case 165:let s=this.#b[++this.#d];this.#m.log&&console.info("LDA $"+s),this.#e=s>=50&&s<=60?this.#l[s-50]:this.#a[s],"function"==typeof this.#e&&this.#e();break;case 133:let a=this.#b[++this.#d];this.#a[a]=this.#e,this.runBuiltinFunction(a);break;case 170:"number"==typeof this.#e&&(this.#f=this.#e);break;case 168:"number"==typeof this.#e&&(this.#g=this.#e);break;case 186:this.#e=this.#f;break;case 152:this.#e=this.#g;break;case 232:this.#f++;break;case 200:this.#g++}this.#d++}}}async function LOAD_6502(t){let e=await fetch(t);if(e.ok){let s=new Uint8Array(await e.arrayBuffer());return new Program(s)}}